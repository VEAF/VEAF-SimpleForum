{% extends "base.html" %}

{% block title %}{{ topic.title }} - VEAF Community{% endblock %}

{% block content %}
<div class="container">
    <nav class="breadcrumb">
        <a href="/">Accueil</a>
        {% for crumb in breadcrumbs %}
        <span class="separator">/</span>
        <a href="/category/{{ get_category_url_slug(crumb) }}">{{ crumb.name }}</a>
        {% endfor %}
        <span class="separator">/</span>
        <span class="current">{{ topic.title[:50] }}{% if topic.title|length > 50 %}...{% endif %}</span>
    </nav>

    <article class="topic-detail">
        <header class="topic-header">
            <h1>
                {% if topic.pinned %}<span class="badge pinned">Epingle</span>{% endif %}
                {% if topic.locked %}<span class="badge locked">Verrouille</span>{% endif %}
                {{ topic.title }}
            </h1>
            <div class="topic-info">
                <span class="topic-date">Cree le {{ topic.created.strftime('%d/%m/%Y a %H:%M') }}</span>
                {% if topic.last_post %}
                <span class="topic-last">Dernier post: {{ topic.last_post.strftime('%d/%m/%Y a %H:%M') }}</span>
                {% endif %}
                <span class="topic-stats">{{ topic.post_count }} posts | {{ topic.view_count }} vues | +{{ topic.rating }}</span>
            </div>
            {% if topic.tags %}
            <div class="topic-tags">
                {% for tag in topic.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </header>

        <div class="topic-content">
            {{ topic.content_html | safe }}
        </div>
    </article>

    <div class="topic-actions">
        <a href="/category/{{ get_category_url_slug(category) }}" class="btn">Retour a la categorie</a>
    </div>
</div>
{% endblock %}
